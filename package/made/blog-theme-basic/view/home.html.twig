{% extends '@theme-basic/_page-layout-side.html.twig' %}

{% block feature %}
    {% if postPromote is defined and postPromote is not null %}
        {% include '@theme-basic/include/_post-jumbotron.html.twig' with {
            'post': postPromote,
        } %}
    {% endif %}
{% endblock %}

{% block feature_below %}
    {% if postPromoteList is defined and postPromoteList is not empty %}
        <div class="row mb-2">
            <div class="col-12">
                <h3 class="pb-4 mb-4 font-italic border-bottom">
                    Promoted
                </h3>
            </div>
        </div>

        <div class="row mb-2">
            {% for post in postPromoteList %}
                {% include '@theme-basic/include/_post-card.html.twig' with {
                    'post': post,
                } %}
            {% endfor %}
        </div>
    {% endif %}
{% endblock %}

{% block side_left_inner %}
    <h3 class="pb-4 mb-4 font-italic border-bottom">
        Feed
    </h3>

    {% for post in postList %}
        {% include '@theme-basic/include/_post-content-preview.html.twig' with {
            'post': post,
        } %}
    {% endfor %}

    {# TODO: Move to post overview template and use as pagination. #}
    {#
    <nav class="blog-pagination">
        <a class="btn btn-outline-primary" href="#">Older</a>
        <a class="btn btn-outline-secondary disabled" href="#" tabindex="-1"
           aria-disabled="true">Newer</a>
    </nav>
    #}

    <nav class="blog-pagination">
        <a class="btn btn-outline-primary" href="{{ url_for('blog.post.list', {
            'locale': locale,
        }) }}">
            View all
        </a>
    </nav>
{% endblock %}

{% block side_right_inner %}
    {% if aboutText is defined and aboutText is not empty %}
        <div class="p-4 mb-3 bg-light rounded">
            <h4 class="font-italic">About</h4>
            <p class="mb-0">
                {{ aboutText|raw }}
            </p>
        </div>
    {% endif %}

    {% if postListDate is defined and postListDate is not empty %}
        <div class="p-4">
            <h4 class="font-italic">Archive</h4>
            <ol class="list-unstyled mb-0">
                {% for postDate in postListDate %}
                    <li>
                        <a href="{{ url_for('blog.post.list.date', {
                            'locale': locale,
                            'date': postDate|date('Y-m'),
                        }) }}">
                            {{ postDate|date('F Y') }}
                        </a>
                    </li>
                {% endfor %}
            </ol>
        </div>
    {% endif %}

    {% if aboutLinkList is defined and aboutLinkList is not empty %}
        <div class="p-4">
            <h4 class="font-italic">Elsewhere</h4>
            <ul class="fa-ul">
                {% for aboutLink in aboutLinkList %}
                    <li>
                        {% if aboutLink.icon is not empty %}
                            <span class="fa-li">
                                <i class="{{ aboutLink.icon }}"></i>
                            </span>
                        {% endif %}
                        {% if aboutLink.target is defined and aboutLink.target is not empty %}
                            <a href="{{ aboutLink.link }}" target="{{ aboutLink.target }}">{{ aboutLink.name }}</a>
                        {% else %}
                            <a href="{{ aboutLink.link }}">{{ aboutLink.name }}</a>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
{% endblock %}
